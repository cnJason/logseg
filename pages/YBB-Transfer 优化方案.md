- ## 现有能力
- 定时任务
	- 定时修改订单的shipment status code ( interval 5min )
	- 定时发送event至upstream(interval 5min )
	- 定时发送exception event至upstream(interval 5min )
	- 定时从CDL获取VPOD(interval 2hour)
	- 定时从Onfleet获取VPOD(interval 2hour)
- 修改keysoftware的属性
	- vehiclepType
	- ref3
- 上游通过接口派发订单
	- tangelo(gobolt)--->未完成
- 监听下游webhook接口
	- onfleet
		- assign
		- started
		- completed
		- failed
- 维护功能
	- 任务停止
	- 任务重置
	- 任务查询(需要重构)
	- 批量重新推送event至上游
	- 任务查询
	- 任务日志查询
- 测试接口
	- 同步vpod
	- 上传vpod压缩包
- ![网络部署图.png](../assets/网络部署图_1659629218359_0.png)
-
- ## 后续发展
- 后续该服务需要支持每日20000 Order的同步处理，需要高性能保证同步任务完备，故需要对transfer进行拆分。
	- 目前同步任务耗时较大的为vpod类，单个请求需要2-3s，若单日有20000个vpod的请求，串行需要50000s进行处理，故需要单独新开线程池，并且以独立服务单独运行。(支持横向扩容)
	- 其他同步任务暂无瓶颈，可合并为一个微服务单独运行。(支持横向扩容)
	- 查询和维护界面需要单独抽离一个微服务运行。(无需扩容)
- 按照上面的拆分之后，我们暂定接口如下：
	- 查询和维护主服务(端口8080不变，依然放在234上部署)
	- 同步服务拆分出2个子服务
		- vpod同步任务服务：端口8090-8099
		- 其他同步任务服务：端口8100-8110
- 目前均部署在234的服务上(每个服务均为1g内存，故需要3G最小Memery)。
- 后续可以考虑上ElasticBeanstalk进行负载均衡的处理。
-
- ## 当下待办任务
- 1. 将sqlite的日志转移到mysql中。并且测试功能完整。
  2. 调整目前代码的合理性(适当考虑重构优化)
  3. 运维界面的逻辑合理性讨论(需要@Feng和@志忠一起帮忙评估)
  4. 若上述服务拆分合理，需要进行服务拆分。
  5. 若需要EB的支持，需要调试后进行域名解析和配置。
  6. 新的2个第三方的DSP的数据接入(包括event上报和vpod获取)
-
-
-
-
-
-