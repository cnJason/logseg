- ## 简介
- 本文将以实战的角度说明如何在使用DFA框架来实现高可用的微服务。主要包含以下内容：
- 1. 高可用微服务的开发准则
  2. 使用DFA框架开发微服务的注意事项
  3. DFA-RPC框架高可用原理说明
- ## 一、高可用微服务的开发准则
- 在维基百科上对高可用的定义如下：
- > 系统无中断地执行其功能的能力，代表系统的可用性程度，是进行系统设计时的准则之一。
- ### 为什么需要高可用
- 一套对外提供服务的系统是需要硬件、软件相结合，但是我们的硬件总是会出故障，软件会有 Bug，硬件会慢慢老化，网络总是不稳定，软件会越来越复杂和庞大。
- 除了硬件软件在本质上无法做到“无中断”，外部环境也可能导致服务的中断，例如断电，地震，火灾，光纤被挖掘机挖断，这些影响的程度可能更大。
- ### 高可用的评价纬度
- 在业界有一套比较出名的评定网站可用性的指标，常用 N 个 9 来量化可用性，可以直接映射到网站正常运行时间的百分比上：
- 例如，有一些服务的升级或数据迁移明明可以在深夜停机或停服务进行，然而考虑到以后的报告要显示出我们的系统达到了多少个 9 的高可用，而放弃停服务这种简单的解决方案，例如停机 2 个小时，就永远也达不到 4 个 9。
- 然而在一些高并发的场合，例如在秒杀或拼团，虽然服务停止了几分钟，但是这个对整个公司业务的影响可能是非常重大的，分分钟丢失的订单可能是一个庞大的数量。
- 所以 N 个 9 来量化可用性其实也得考虑业务的情况。
- ### 微服务高可用设计手段
- 高可用是一个比较复杂的命题，基本上在所有的处理中都会涉及到高可用，所有在设计高可用方案也涉及到了方方面面，如服务冗余、负载均衡、服务限流等。
- 这中间将会出现的细节是多种多样的，所以我们需要对这样一个微服务高可用方案进行一个顶层的设计，围绕服务高可用，先检查下我们手里有多少张牌。
- ##### 服务冗余
-